<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>qunit Building</title>

    <link rel="stylesheet" href="https://code.jquery.com/qunit/qunit-2.6.1.css">
    <script src="https://code.jquery.com/qunit/qunit-2.6.1.js"></script>
    <script src="../src/building.js"></script>
    <script src="../src/room.js"></script>

    <script>

        QUnit.test("main building", function( assert ) {
            building.createBuilding({
                buildingName:"ben",
                buildingNum:"1"
            });
            assert.equal(building.getBuildingNum(),"1","The Building number is: " + building.getBuildingNum());
            assert.equal(building.getBuildingName(),"ben","The building name is: "+ building.getBuildingName());
            assert.equal(building.getBuildingId(),"BL-" + building.getBuildingName() + building.getBuildingNum(),"The buildingId Is: "  + "BL-" + building.getBuildingName() + building.getBuildingNum());
        });

        QUnit.test("main room", function( assert ) {
            var r = new Room("roomben","1", "BL-ben1");
            assert.equal(r.getRoomNum(),"1","The room number is: " + r.getRoomNum());
            assert.equal(r.getRoomName(),"roomben","The room name is:" + r.getRoomName());
            r.setDepartmentName("benDepartment");
            assert.equal(r.getDepartmentName(),"benDepartment","The Department name is:" + r.getDepartmentName());

        });

        QUnit.test("main flow building", function( assert ) {
           building.createBuilding({
                buildingName:"Sap israel building",
                buildingNum:"132"
            });

            var rm1 = new Room("rm1","1111",building.getBuildingId());
            var rm2 = new Room("rm2","2222",building.getBuildingId());
            var rm3 = new Room("rm3","3333",building.getBuildingId());

            var rooms = [];
            rooms.push(rm1,rm2,rm3);
            building.addRooms(rooms);
            rm1.setRoomEmployeeName("ben1");
            rm2.setRoomEmployeeName("ben2");
            rm2.setRoomEmployeeName("ben3");
            console.table(building.getBuilding(),['index']);
            assert.equal(building.getRooms().length,3,"Number of rooms is: " + building.getRooms().length);
            assert.equal(rm1.getRoomEmployeeNames().length,1,"Total Employees in rm1 room: " + rm1.getRoomEmployeeNames().length);
            assert.equal(rm2.getRoomEmployeeNames().length,2,"Total Employees in rm2 room: " + rm2.getRoomEmployeeNames().length);
            assert.equal(building.findEmployeeRoom("ben1").roomName,"rm1","ben1 Employee found in room: " + building.findEmployeeRoom("ben1").roomName);
            assert.equal(building.findEmployeeRoom("ben").roomName,"Employee name not found","ben Employee not found in room: " + building.findEmployeeRoom("ben").roomName);
            rm2.setRoomEmployeeName("benToDelete");
            assert.equal(rm2.getRoomEmployeeNames().length,3," benToDelete was added to this room");
            rm2.removeRoomEmployeeName("benToDelete");
            assert.equal(rm2.getRoomEmployeeNames().length,2,"benToDelete was removed in this room: " + rm2.getRoomEmployeeNames().length);

            building.removeRoom(rm1.getRoomId());
            assert.equal(building.getRooms().length,2,"Number of rooms is: " + building.getRooms().length + " after removed one room");
            console.table(building.getBuilding(),['index']);


        });

        document.addEventListener("load", function(){
            window.prompt(JSON.stringify(building.getBuilding()));
        });

    </script>
</head>
<body>

<div id="qunit"></div>

</body>
</html>